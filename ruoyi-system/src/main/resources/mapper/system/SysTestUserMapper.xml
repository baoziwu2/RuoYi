<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.SysTestUserMapper">
    
    <resultMap type="SysTestUser" id="SysTestUserResult">
        <result property="userId"    column="user_id"    />
        <result property="userCode"    column="user_code"    />
        <result property="userName"    column="user_name"    />
        <result property="userSex"    column="user_sex"    />
        <result property="userPhone"    column="user_phone"    />
        <result property="userEmail"    column="user_email"    />
        <result property="userBalance"    column="user_balance"    />
        <result property="status"    column="status"    />
    </resultMap>

    <sql id="selectSysTestUserVo">
        select user_id, user_code, user_name, user_sex, user_phone, user_email, user_balance, status from sys_test_user
    </sql>

    <select id="selectSysTestUserList" parameterType="SysTestUser" resultMap="SysTestUserResult">
        <include refid="selectSysTestUserVo"/>
        <where>  
            <if test="userCode != null  and userCode != ''"> and user_code = #{userCode}</if>
            <if test="userName != null  and userName != ''"> and user_name like concat('%', #{userName}, '%')</if>
            <if test="userSex != null  and userSex != ''"> and user_sex = #{userSex}</if>
            <if test="userPhone != null  and userPhone != ''"> and user_phone = #{userPhone}</if>
            <if test="userEmail != null  and userEmail != ''"> and user_email = #{userEmail}</if>
            <if test="userBalance != null "> and user_balance = #{userBalance}</if>
            <if test="status != null  and status != ''"> and status = #{status}</if>
        </where>
    </select>
    
    <select id="selectSysTestUserByUserId" parameterType="Long" resultMap="SysTestUserResult">
        <include refid="selectSysTestUserVo"/>
        where user_id = #{userId}
    </select>

    <insert id="insertSysTestUser" parameterType="SysTestUser" useGeneratedKeys="true" keyProperty="userId">
        insert into sys_test_user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="userCode != null">user_code,</if>
            <if test="userName != null">user_name,</if>
            <if test="userSex != null">user_sex,</if>
            <if test="userPhone != null">user_phone,</if>
            <if test="userEmail != null">user_email,</if>
            <if test="userBalance != null">user_balance,</if>
            <if test="status != null">status,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="userCode != null">#{userCode},</if>
            <if test="userName != null">#{userName},</if>
            <if test="userSex != null">#{userSex},</if>
            <if test="userPhone != null">#{userPhone},</if>
            <if test="userEmail != null">#{userEmail},</if>
            <if test="userBalance != null">#{userBalance},</if>
            <if test="status != null">#{status},</if>
         </trim>
    </insert>

    <update id="updateSysTestUser" parameterType="SysTestUser">
        update sys_test_user
        <trim prefix="SET" suffixOverrides=",">
            <if test="userCode != null">user_code = #{userCode},</if>
            <if test="userName != null">user_name = #{userName},</if>
            <if test="userSex != null">user_sex = #{userSex},</if>
            <if test="userPhone != null">user_phone = #{userPhone},</if>
            <if test="userEmail != null">user_email = #{userEmail},</if>
            <if test="userBalance != null">user_balance = #{userBalance},</if>
            <if test="status != null">status = #{status},</if>
        </trim>
        where user_id = #{userId}
    </update>

    <delete id="deleteSysTestUserByUserId" parameterType="Long">
        delete from sys_test_user where user_id = #{userId}
    </delete>

    <delete id="deleteSysTestUserByUserIds" parameterType="String">
        delete from sys_test_user where user_id in 
        <foreach item="userId" collection="array" open="(" separator="," close=")">
            #{userId}
        </foreach>
    </delete>

</mapper>